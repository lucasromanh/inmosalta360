<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Test Edit Button</title>
    <style>
        body { font-family: Arial, sans-serif; margin: 20px; }
        .test-container { max-width: 800px; margin: 0 auto; }
        .property-card { border: 1px solid #ddd; padding: 20px; margin: 10px 0; border-radius: 8px; }
        .edit-button { background: #3b82f6; color: white; padding: 10px 20px; border: none; border-radius: 5px; cursor: pointer; }
        .edit-button:hover { background: #2563eb; }
        .log { background: #f5f5f5; padding: 10px; border-radius: 5px; margin: 10px 0; font-family: monospace; font-size: 12px; }
    </style>
</head>
<body>
    <div class="test-container">
        <h1>üîß Test del Sistema de Edici√≥n</h1>
        
        <div class="log" id="log">
            <strong>Log de depuraci√≥n:</strong><br>
        </div>
        
        <div class="property-card">
            <h3>Propiedad de Prueba</h3>
            <p>Casa en Salta Capital - $150,000</p>
            <button class="edit-button" onclick="testEditFunction()">‚úèÔ∏è Editar Propiedad</button>
        </div>
        
        <h3>Estado del localStorage:</h3>
        <div class="log" id="localStorage-content">
            Cargando...
        </div>
        
        <button onclick="clearStorage()" style="background: #dc2626; color: white; padding: 10px 20px; border: none; border-radius: 5px; cursor: pointer;">
            üóëÔ∏è Limpiar localStorage
        </button>
    </div>

    <script>
        // Funci√≥n de prueba que simula el bot√≥n editar
        function testEditFunction() {
            log('üîß Bot√≥n EDITAR clickeado');
            
            const testProperty = {
                id: "test-123",
                title: "Casa de Prueba",
                description: "Descripci√≥n de prueba",
                price: 150000,
                location: "Salta Capital",
                bedrooms: 3,
                bathrooms: 2,
                area: 120,
                type: "Casa",
                images: [
                    "https://via.placeholder.com/400x300/3b82f6/ffffff?text=Imagen+1",
                    "https://via.placeholder.com/400x300/ef4444/ffffff?text=Imagen+2",
                    "https://via.placeholder.com/400x300/10b981/ffffff?text=Imagen+3",
                    "https://via.placeholder.com/400x300/f59e0b/ffffff?text=Imagen+4"
                ]
            };
            
            log('üîß Datos completos: ' + JSON.stringify(testProperty, null, 2));
            
            try {
                // Guardar en localStorage
                localStorage.setItem('editingProperty', JSON.stringify(testProperty));
                localStorage.setItem('editMode', 'true');
                log('üîß ‚úÖ Propiedad guardada en localStorage');
                
                // Simular navegaci√≥n
                const newUrl = window.location.origin + '/admin/propiedades/nueva?edit=' + testProperty.id;
                log('üîß üìç Navegando a: ' + newUrl);
                
                // En un entorno real, usar√≠amos React Router navigate
                // navigate(`/admin/propiedades/nueva?edit=${property.id}`);
                log('üîß ‚úÖ Navegaci√≥n simulada exitosa');
                
                updateLocalStorageDisplay();
                
            } catch (error) {
                log('üîß ‚ùå Error: ' + error.message);
            }
        }
        
        function log(message) {
            const logDiv = document.getElementById('log');
            logDiv.innerHTML += '<br>' + new Date().toLocaleTimeString() + ' - ' + message;
            logDiv.scrollTop = logDiv.scrollHeight;
        }
        
        function updateLocalStorageDisplay() {
            const content = document.getElementById('localStorage-content');
            const editingProperty = localStorage.getItem('editingProperty');
            const editMode = localStorage.getItem('editMode');
            
            content.innerHTML = `
                <strong>editMode:</strong> ${editMode}<br>
                <strong>editingProperty:</strong><br>
                ${editingProperty ? JSON.stringify(JSON.parse(editingProperty), null, 2) : 'null'}
            `;
        }
        
        function clearStorage() {
            localStorage.removeItem('editingProperty');
            localStorage.removeItem('editMode');
            log('üóëÔ∏è localStorage limpiado');
            updateLocalStorageDisplay();
        }
        
        // Inicializar
        window.onload = function() {
            log('üîß Test de edici√≥n iniciado');
            updateLocalStorageDisplay();
        };
        
        // Actualizar display cada segundo
        setInterval(updateLocalStorageDisplay, 1000);
    </script>
</body>
</html>